<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† - Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ²ÙŠØ¹</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #1abc9c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #f5f6fa;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¹Ø§Ù…Ø© - Ù†ÙØ³ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚ */
        .navbar, .sidebar, .main-content, .page-header, .btn {
            /* Ù†ÙØ³ ØªÙ†Ø³ÙŠÙ‚Ø§Øª dashboard.html */
        }

        .reps-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }

        .reps-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .rep-stat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid;
            transition: all 0.3s;
            cursor: pointer;
        }

        .rep-stat:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .rep-stat.active { border-color: var(--success); }
        .rep-stat.inactive { border-color: var(--warning); }
        .rep-stat.on-trip { border-color: var(--info); }
        .rep-stat.target { border-color: var(--danger); }

        .rep-stat h3 {
            font-size: 28px;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .rep-stat p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .rep-stat small {
            color: #95a5a6;
            font-size: 12px;
        }

        .reps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .rep-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-top: 5px solid var(--secondary);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .rep-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .rep-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to left, var(--secondary), var(--info));
        }

        .rep-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .rep-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--info));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .rep-info h3 {
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 18px;
        }

        .rep-info p {
            color: #7f8c8d;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .rep-status {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active { background: rgba(46, 204, 113, 0.1); color: var(--success); }
        .status-on-trip { background: rgba(52, 152, 219, 0.1); color: var(--secondary); }
        .status-inactive { background: rgba(149, 165, 166, 0.1); color: #95a5a6; }

        .rep-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .detail-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .detail-label {
            font-size: 12px;
            color: #7f8c8d;
            text-align: center;
        }

        .rep-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .rep-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .rep-btn.track { background: rgba(52, 152, 219, 0.1); color: var(--secondary); }
        .rep-btn.sales { background: rgba(46, 204, 113, 0.1); color: var(--success); }
        .rep-btn.assign { background: rgba(155, 89, 182, 0.1); color: #9b59b6; }

        .rep-btn:hover {
            transform: translateY(-2px);
        }

        .rep-performance {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .performance-bar {
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .performance-fill {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(to right, var(--success), var(--info));
            transition: width 1s ease-out;
        }

        .performance-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #7f8c8d;
        }

        .map-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-top: 25px;
            height: 400px;
            position: relative;
            overflow: hidden;
        }

        .map-placeholder {
            background: linear-gradient(45deg, #f5f7fa, #c3cfe2);
            height: 100%;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
        }

        .map-placeholder i {
            font-size: 72px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .rep-details-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .details-modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease-out;
        }

        .modal-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 15px 15px 0 0;
            overflow: hidden;
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: white;
            color: var(--primary);
            border-bottom: 3px solid var(--secondary);
        }

        .modal-body {
            padding: 25px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .detail-row {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .detail-label {
            flex: 1;
            color: var(--primary);
            font-weight: 600;
        }

        .detail-value {
            flex: 2;
            color: #555;
        }

        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .schedule-table th {
            background: var(--primary);
            color: white;
            padding: 12px;
            text-align: right;
        }

        .schedule-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        .add-rep-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success), var(--info));
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(46, 204, 113, 0.3);
            transition: all 0.3s;
            z-index: 100;
        }

        .add-rep-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
        }

        @media (max-width: 768px) {
            .reps-grid {
                grid-template-columns: 1fr;
            }
            
            .rep-details {
                grid-template-columns: 1fr;
            }
            
            .details-modal-content {
                width: 95%;
                max-height: 80vh;
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <!-- Ù†ÙØ³ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ ÙˆØ§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ù…Ù† dashboard.html -->
    
    <main class="main-content">
        <div class="page-header">
            <div class="page-title">
                <i class="fas fa-users"></i>
                <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†</h1>
            </div>
            <div class="page-actions">
                <button class="btn btn-primary" onclick="showAllTrips()">
                    <i class="fas fa-map-marked-alt"></i> Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø±Ø­Ù„Ø§Øª
                </button>
                <button class="btn btn-success" onclick="generatePerformanceReport()">
                    <i class="fas fa-chart-bar"></i> ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡
                </button>
            </div>
        </div>

        <div class="reps-container">
            <div class="reps-stats">
                <div class="rep-stat active" onclick="filterReps('active')">
                    <h3 id="activeReps">3</h3>
                    <p>Ù…Ù†Ø¯ÙˆØ¨ Ù†Ø´Ø·</p>
                    <small>ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†</small>
                </div>
                <div class="rep-stat on-trip" onclick="filterReps('on-trip')">
                    <h3 id="onTrip">1</h3>
                    <p>ÙÙŠ Ø±Ø­Ù„Ø©</p>
                    <small>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„</small>
                </div>
                <div class="rep-stat inactive" onclick="filterReps('inactive')">
                    <h3 id="inactiveReps">0</h3>
                    <p>ØºÙŠØ± Ù†Ø´Ø·</p>
                    <small>Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©</small>
                </div>
                <div class="rep-stat target" onclick="showTargets()">
                    <h3 id="avgPerformance">85%</h3>
                    <p>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø£Ø¯Ø§Ø¡</p>
                    <small>Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</small>
                </div>
            </div>

            <div class="filter-bar">
                <div class="filter-item">
                    <label>Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†Ø¯ÙˆØ¨</label>
                    <input type="text" id="searchRep" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ Ø£Ùˆ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
                </div>
                <div class="filter-item">
                    <label>ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨</label>
                    <select id="sortReps">
                        <option value="performance">Ø§Ù„Ø£Ø¯Ø§Ø¡</option>
                        <option value="sales">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</option>
                        <option value="collection">Ø§Ù„ØªØ­ØµÙŠÙ„</option>
                        <option value="name">Ø§Ù„Ø§Ø³Ù…</option>
                    </select>
                </div>
                <div class="filter-item">
                    <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                    <select id="filterArea">
                        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</option>
                        <option value="east">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
                        <option value="west">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©</option>
                        <option value="north">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©</option>
                        <option value="south">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©</option>
                    </select>
                </div>
                <div class="filter-actions">
                    <button class="btn btn-primary" onclick="applyRepFilters()">
                        <i class="fas fa-filter"></i> ØªØ·Ø¨ÙŠÙ‚
                    </button>
                    <button class="btn" onclick="resetRepFilters()">
                        <i class="fas fa-redo"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                    </button>
                </div>
            </div>

            <div class="reps-grid" id="repsGrid">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
            </div>
        </div>

        <div class="map-container">
            <h3><i class="fas fa-map-marked-alt"></i> Ø®Ø±ÙŠØ·Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†</h3>
            <div class="map-placeholder">
                <i class="fas fa-map-marked-alt"></i>
                <p>Ø®Ø±ÙŠØ·Ø© ØªØªØ¨Ø¹ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</p>
                <small>Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù‚Ø§Ø¯Ù…</small>
            </div>
        </div>
    </main>

    <!-- Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯ -->
    <button class="add-rep-btn" onclick="showAddRepModal()">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ -->
    <div id="repDetailsModal" class="rep-details-modal">
        <div class="details-modal-content">
            <div class="modal-tabs">
                <button class="tab-btn active" onclick="switchTab('info')">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</button>
                <button class="tab-btn" onclick="switchTab('performance')">Ø§Ù„Ø£Ø¯Ø§Ø¡</button>
                <button class="tab-btn" onclick="switchTab('schedule')">Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ</button>
                <button class="tab-btn" onclick="switchTab('customers')">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
            </div>
            
            <div class="modal-body">
                <div id="tab-info" class="tab-content active">
                    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
                </div>
                
                <div id="tab-performance" class="tab-content">
                    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø¡ -->
                </div>
                
                <div id="tab-schedule" class="tab-content">
                    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ -->
                </div>
                
                <div id="tab-customers" class="tab-content">
                    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ -->
                </div>
            </div>
            
            <div style="padding: 20px; border-top: 1px solid #eee; display: flex; gap: 10px;">
                <button class="btn btn-primary" style="flex: 1;" onclick="editRep()">
                    <i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„
                </button>
                <button class="btn btn-success" style="flex: 1;" onclick="assignCustomers()">
                    <i class="fas fa-user-plus"></i> ØªÙˆØ²ÙŠØ¹ Ø¹Ù…Ù„Ø§Ø¡
                </button>
                <button class="btn" style="flex: 1;" onclick="closeRepDetails()">
                    <i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯ -->
    <div id="addRepModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯</h3>
                <button class="close-modal" onclick="closeAddRepModal()">Ã—</button>
            </div>
            
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</label>
                <input type="text" id="repName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
            </div>
            
            <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                <input type="tel" id="repPhone" placeholder="Ù…Ø«Ø§Ù„: 01012345678">
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                <input type="email" id="repEmail" placeholder="email@example.com">
            </div>
            
            <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 20px;">
                <div class="form-group" style="flex: 1;">
                    <label>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
                    <input type="number" id="repSalary" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡">
                </div>
                <div class="form-group" style="flex: 1;">
                    <label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© (%)</label>
                    <input type="number" id="repCommission" placeholder="Ù…Ø«Ø§Ù„: 5" min="0" max="100" step="0.5">
                </div>
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                <select id="repArea">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
                    <option value="east">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
                    <option value="west">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©</option>
                    <option value="north">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©</option>
                    <option value="south">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ù…Ø®ØµØµØ©</label>
                <select id="repVehicle">
                    <option value="">Ø¨Ø¯ÙˆÙ† Ø³ÙŠØ§Ø±Ø©</option>
                    <option value="car1">Ø³ÙŠØ§Ø±Ø© Ù¡ - Ø£ Ø¨ Ø¬ Ù¡Ù¢Ù£Ù¤</option>
                    <option value="car2">Ø³ÙŠØ§Ø±Ø© Ù¢ - Ø¯ Ù‡Ù€ Ùˆ Ù¥Ù¦Ù§Ù¨</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                <textarea id="repNotes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©"></textarea>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn btn-success" style="flex: 1;" onclick="saveNewRep()">
                    <i class="fas fa-save"></i> Ø­ÙØ¸
                </button>
                <button class="btn" style="flex: 1;" onclick="closeAddRepModal()">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†
        const repsData = [
            {
                id: 1,
                name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…ÙˆØ¯",
                phone: "01011112222",
                email: "ahmed@company.com",
                area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©",
                status: "active",
                salary: 3000,
                commission: 5,
                vehicle: "Ø³ÙŠØ§Ø±Ø© Ù¡ - Ø£ Ø¨ Ø¬ Ù¡Ù¢Ù£Ù¤",
                todaySales: 12000,
                todayCollection: 8000,
                totalSales: 150000,
                totalCollection: 120000,
                customersCount: 25,
                performance: 85,
                joinDate: "2023-01-15",
                targets: {
                    monthly: 50000,
                    achieved: 45000,
                    remaining: 5000
                },
                schedule: [
                    { day: "Ø§Ù„Ø³Ø¨Øª", visits: 12, completed: 10 },
                    { day: "Ø§Ù„Ø£Ø­Ø¯", visits: 15, completed: 12 },
                    { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", visits: 10, completed: 8 },
                    { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", visits: 14, completed: 12 },
                    { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", visits: 8, completed: 8 },
                    { day: "Ø§Ù„Ø®Ù…ÙŠØ³", visits: 12, completed: 9 },
                    { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", visits: 6, completed: 6 }
                ]
            },
            {
                id: 2,
                name: "Ø®Ø§Ù„Ø¯ Ø¹Ù…Ø±Ùˆ",
                phone: "01022223333",
                email: "khaled@company.com",
                area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©",
                status: "on-trip",
                salary: 3000,
                commission: 5,
                vehicle: "Ø³ÙŠØ§Ø±Ø© Ù¡ - Ø£ Ø¨ Ø¬ Ù¡Ù¢Ù£Ù¤",
                todaySales: 10000,
                todayCollection: 7500,
                totalSales: 120000,
                totalCollection: 100000,
                customersCount: 20,
                performance: 90,
                joinDate: "2023-03-20",
                targets: {
                    monthly: 45000,
                    achieved: 42000,
                    remaining: 3000
                },
                schedule: [
                    { day: "Ø§Ù„Ø³Ø¨Øª", visits: 10, completed: 8 },
                    { day: "Ø§Ù„Ø£Ø­Ø¯", visits: 12, completed: 10 },
                    { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", visits: 15, completed: 12 },
                    { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", visits: 8, completed: 7 },
                    { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", visits: 12, completed: 10 },
                    { day: "Ø§Ù„Ø®Ù…ÙŠØ³", visits: 14, completed: 12 },
                    { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", visits: 5, completed: 5 }
                ]
            },
            {
                id: 3,
                name: "ÙˆÙ„ÙŠØ¯ Ø­Ø³Ù†",
                phone: "01033334444",
                email: "waleed@company.com",
                area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©",
                status: "active",
                salary: 3000,
                commission: 5,
                vehicle: "Ø¨Ø¯ÙˆÙ† Ø³ÙŠØ§Ø±Ø©",
                todaySales: 6000,
                todayCollection: 4500,
                totalSales: 80000,
                totalCollection: 60000,
                customersCount: 15,
                performance: 75,
                joinDate: "2023-06-10",
                targets: {
                    monthly: 40000,
                    achieved: 30000,
                    remaining: 10000
                },
                schedule: [
                    { day: "Ø§Ù„Ø³Ø¨Øª", visits: 8, completed: 6 },
                    { day: "Ø§Ù„Ø£Ø­Ø¯", visits: 10, completed: 8 },
                    { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", visits: 12, completed: 9 },
                    { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", visits: 8, completed: 7 },
                    { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", visits: 10, completed: 8 },
                    { day: "Ø§Ù„Ø®Ù…ÙŠØ³", visits: 8, completed: 6 },
                    { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", visits: 4, completed: 4 }
                ]
            }
        ];

        let selectedRepId = null;

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†
        document.addEventListener('DOMContentLoaded', function() {
            loadRepsData();
            updateStats();
        });

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†
        function loadRepsData() {
            const repsGrid = document.getElementById('repsGrid');
            repsGrid.innerHTML = '';
            
            repsData.forEach(rep => {
                const statusClass = rep.status === 'active' ? 'status-active' : 
                                  rep.status === 'on-trip' ? 'status-on-trip' : 'status-inactive';
                const statusText = rep.status === 'active' ? 'Ù†Ø´Ø·' : 
                                 rep.status === 'on-trip' ? 'ÙÙŠ Ø±Ø­Ù„Ø©' : 'ØºÙŠØ± Ù†Ø´Ø·';
                
                const avatarLetter = rep.name.charAt(0);
                const performanceColor = rep.performance >= 90 ? 'var(--success)' :
                                       rep.performance >= 70 ? 'var(--warning)' : 'var(--danger)';
                
                repsGrid.innerHTML += `
                    <div class="rep-card" onclick="showRepDetails(${rep.id})">
                        <div class="rep-status ${statusClass}">
                            <i class="fas fa-circle"></i> ${statusText}
                        </div>
                        
                        <div class="rep-header">
                            <div class="rep-avatar">${avatarLetter}</div>
                            <div class="rep-info">
                                <h3>${rep.name}</h3>
                                <p><i class="fas fa-map-marker-alt"></i> ${rep.area}</p>
                                <p><i class="fas fa-phone"></i> ${rep.phone}</p>
                            </div>
                        </div>
                        
                        <div class="rep-details">
                            <div class="detail-item">
                                <div class="detail-value">${rep.todaySales.toLocaleString()} Ø¬</div>
                                <div class="detail-label">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-value">${rep.todayCollection.toLocaleString()} Ø¬</div>
                                <div class="detail-label">ØªØ­ØµÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-value">${rep.customersCount}</div>
                                <div class="detail-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-value">${rep.performance}%</div>
                                <div class="detail-label">Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
                            </div>
                        </div>
                        
                        <div class="rep-performance">
                            <div class="performance-labels">
                                <span>ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù‡Ø¯Ù</span>
                                <span>${rep.performance}%</span>
                            </div>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: ${rep.performance}%; background: ${performanceColor};"></div>
                            </div>
                        </div>
                        
                        <div class="rep-actions">
                            <button class="rep-btn track" onclick="event.stopPropagation(); trackRep(${rep.id})">
                                <i class="fas fa-map-marker-alt"></i> ØªØªØ¨Ø¹
                            </button>
                            <button class="rep-btn sales" onclick="event.stopPropagation(); viewSales(${rep.id})">
                                <i class="fas fa-chart-line"></i> Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
                            </button>
                            <button class="rep-btn assign" onclick="event.stopPropagation(); assignTasks(${rep.id})">
                                <i class="fas fa-tasks"></i> Ù…Ù‡Ø§Ù…
                            </button>
                        </div>
                    </div>
                `;
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            const activeReps = repsData.filter(rep => rep.status === 'active').length;
            const onTripReps = repsData.filter(rep => rep.status === 'on-trip').length;
            const inactiveReps = repsData.filter(rep => rep.status === 'inactive').length;
            const avgPerformance = Math.round(repsData.reduce((sum, rep) => sum + rep.performance, 0) / repsData.length);
            
            document.getElementById('activeReps').textContent = activeReps;
            document.getElementById('onTrip').textContent = onTripReps;
            document.getElementById('inactiveReps').textContent = inactiveReps;
            document.getElementById('avgPerformance').textContent = avgPerformance + '%';
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ±
        function applyRepFilters() {
            const searchTerm = document.getElementById('searchRep').value.toLowerCase();
            const sortBy = document.getElementById('sortReps').value;
            const area = document.getElementById('filterArea').value;
            
            let filteredReps = repsData;
            
            // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«
            if (searchTerm) {
                filteredReps = filteredReps.filter(rep => 
                    rep.name.toLowerCase().includes(searchTerm) || 
                    rep.area.toLowerCase().includes(searchTerm)
                );
            }
            
            // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
            if (area) {
                const areaMap = {
                    'east': 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©',
                    'west': 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©',
                    'north': 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©',
                    'south': 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©'
                };
                filteredReps = filteredReps.filter(rep => rep.area === areaMap[area]);
            }
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            filteredReps.sort((a, b) => {
                switch(sortBy) {
                    case 'performance':
                        return b.performance - a.performance;
                    case 'sales':
                        return b.todaySales - a.todaySales;
                    case 'collection':
                        return b.todayCollection - a.todayCollection;
                    case 'name':
                        return a.name.localeCompare(b.name, 'ar');
                    default:
                        return 0;
                }
            });
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ÙÙ„ØªØ±Ø©
            const repsGrid = document.getElementById('repsGrid');
            repsGrid.innerHTML = '';
            
            filteredReps.forEach(rep => {
                // Ù†ÙØ³ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø§Ø¨Ù‚...
                // (Ù„Ù„ØªÙ‚Ù„ÙŠÙ„ Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±ØŒ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ù„Ø© Ù…Ù†ÙØµÙ„Ø©)
                loadRepsData(); // Ø¹Ø±Ø¶ Ù…Ø¤Ù‚Øª
            });
            
            alert(`ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${filteredReps.length} Ù…Ù†Ø¯ÙˆØ¨`);
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙ„Ø§ØªØ±
        function resetRepFilters() {
            document.getElementById('searchRep').value = '';
            document.getElementById('sortReps').value = 'performance';
            document.getElementById('filterArea').value = '';
            loadRepsData();
        }

        // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
        function filterReps(type) {
            let filteredReps = [];
            switch(type) {
                case 'active':
                    filteredReps = repsData.filter(rep => rep.status === 'active');
                    break;
                case 'on-trip':
                    filteredReps = repsData.filter(rep => rep.status === 'on-trip');
                    break;
                case 'inactive':
                    filteredReps = repsData.filter(rep => rep.status === 'inactive');
                    break;
            }
            
            if (filteredReps.length === 0) {
                alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬');
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ÙÙ„ØªØ±Ø©
            const repsGrid = document.getElementById('repsGrid');
            repsGrid.innerHTML = '';
            
            filteredReps.forEach(rep => {
                // Ù†ÙØ³ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ø±Ø¶...
                loadRepsData(); // Ø¹Ø±Ø¶ Ù…Ø¤Ù‚Øª
            });
        }

        // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
        function showRepDetails(repId) {
            selectedRepId = repId;
            const rep = repsData.find(r => r.id === repId);
            
            // ØªØ¹Ø¨Ø¦Ø© Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
            document.getElementById('tab-info').innerHTML = `
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</div>
                    <div class="detail-value">${rep.name}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</div>
                    <div class="detail-value">${rep.phone}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
                    <div class="detail-value">${rep.email}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</div>
                    <div class="detail-value">${rep.area}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</div>
                    <div class="detail-value">${rep.salary.toLocaleString()} Ø¬</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</div>
                    <div class="detail-value">${rep.commission}%</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ù…Ø®ØµØµØ©</div>
                    <div class="detail-value">${rep.vehicle}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹ÙŠÙŠÙ†</div>
                    <div class="detail-value">${rep.joinDate}</div>
                </div>
            `;
            
            // ØªØ¹Ø¨Ø¦Ø© Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
            const commissionAmount = (rep.totalSales * rep.commission / 100).toFixed(0);
            const totalEarnings = parseInt(rep.salary) + parseInt(commissionAmount);
            
            document.getElementById('tab-performance').innerHTML = `
                <h4 style="margin-bottom: 15px;">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</h4>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div>
                    <div class="detail-value">${rep.totalSales.toLocaleString()} Ø¬</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
                    <div class="detail-value">${rep.totalCollection.toLocaleString()} Ø¬</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
                    <div class="detail-value">${rep.customersCount} Ø¹Ù…ÙŠÙ„</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
                    <div class="detail-value">${rep.performance}%</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</div>
                    <div class="detail-value">${commissionAmount.toLocaleString()} Ø¬</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„</div>
                    <div class="detail-value"><strong>${totalEarnings.toLocaleString()} Ø¬</strong></div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ù‡Ø¯Ù Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
                    <div class="detail-value">${rep.targets.monthly.toLocaleString()} Ø¬</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ù…Ø­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡Ø¯Ù</div>
                    <div class="detail-value">${rep.targets.achieved.toLocaleString()} Ø¬ (${((rep.targets.achieved/rep.targets.monthly)*100).toFixed(1)}%)</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù‡Ø¯Ù</div>
                    <div class="detail-value">${rep.targets.remaining.toLocaleString()} Ø¬</div>
                </div>
            `;
            
            // ØªØ¹Ø¨Ø¦Ø© Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ
            let scheduleRows = '';
            rep.schedule.forEach(day => {
                const completionRate = ((day.completed / day.visits) * 100).toFixed(0);
                scheduleRows += `
                    <tr>
                        <td>${day.day}</td>
                        <td>${day.visits}</td>
                        <td>${day.completed}</td>
                        <td>
                            <span style="color: ${completionRate >= 90 ? 'var(--success)' : completionRate >= 70 ? 'var(--warning)' : 'var(--danger)'}">
                                ${completionRate}%
                            </span>
                        </td>
                    </tr>
                `;
            });
            
            document.getElementById('tab-schedule').innerHTML = `
                <h4 style="margin-bottom: 15px;">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h4>
                <table class="schedule-table">
                    <thead>
                        <tr>
                            <th>Ø§Ù„ÙŠÙˆÙ…</th>
                            <th>Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø®Ø·Ø· Ù„Ù‡Ø§</th>
                            <th>Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</th>
                            <th>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${scheduleRows}
                    </tbody>
                </table>
            `;
            
            // ØªØ¹Ø¨Ø¦Ø© Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            document.getElementById('tab-customers').innerHTML = `
                <h4 style="margin-bottom: 15px;">Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</h4>
                <div style="text-align: center; padding: 40px;">
                    <i class="fas fa-users" style="font-size: 48px; color: #ddd; margin-bottom: 15px;"></i>
                    <p>Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨</p>
                    <small>Ø³ÙŠØªÙ… Ø¯Ù…Ø¬ Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù‚Ø§Ø¯Ù…</small>
                </div>
            `;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø©
            document.getElementById('repDetailsModal').style.display = 'flex';
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        function switchTab(tabName) {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ø²Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯
            event.target.classList.add('active');
            
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // Ø¥ØºÙ„Ø§Ù‚ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
        function closeRepDetails() {
            document.getElementById('repDetailsModal').style.display = 'none';
        }

        // ØªØªØ¨Ø¹ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
        function trackRep(repId) {
            const rep = repsData.find(r => r.id === repId);
            alert(`Ø¬Ø§Ø±ÙŠ ØªØªØ¨Ø¹ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ${rep.name}\nØ§Ù„Ù…Ù†Ø·Ù‚Ø©: ${rep.area}\nØ§Ù„Ø­Ø§Ù„Ø©: ${rep.status === 'on-trip' ? 'ÙÙŠ Ø±Ø­Ù„Ø©' : 'Ù†Ø´Ø·'}`);
        }

        // Ø¹Ø±Ø¶ Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
        function viewSales(repId) {
            const rep = repsData.find(r => r.id === repId);
            alert(`Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ${rep.name}:\n- Ø§Ù„ÙŠÙˆÙ…: ${rep.todaySales.toLocaleString()} Ø¬\n- Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${rep.totalSales.toLocaleString()} Ø¬\n- Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©: ${(rep.totalSales * rep.commission / 100).toLocaleString()} Ø¬`);
        }

        // ØªØ¹ÙŠÙŠÙ† Ù…Ù‡Ø§Ù… Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨
        function assignTasks(repId) {
            const rep = repsData.find(r => r.id === repId);
            const taskCount = prompt(`ÙƒÙ… Ù…Ù‡Ù…Ø© ØªØ±ÙŠØ¯ ØªØ¹ÙŠÙŠÙ†Ù‡Ø§ Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨ ${rep.name}ØŸ`);
            if (taskCount && !isNaN(taskCount)) {
                alert(`ØªÙ… ØªØ¹ÙŠÙŠÙ† ${taskCount} Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨ ${rep.name}`);
            }
        }

        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨
        function showAddRepModal() {
            document.getElementById('addRepModal').style.display = 'flex';
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø¯ÙˆØ¨
        function closeAddRepModal() {
            document.getElementById('addRepModal').style.display = 'none';
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('repName').value = '';
            document.getElementById('repPhone').value = '';
            document.getElementById('repEmail').value = '';
            document.getElementById('repSalary').value = '';
            document.getElementById('repCommission').value = '';
            document.getElementById('repArea').value = '';
            document.getElementById('repVehicle').value = '';
            document.getElementById('repNotes').value = '';
        }

        // Ø­ÙØ¸ Ù…Ù†Ø¯ÙˆØ¨ Ø¬Ø¯ÙŠØ¯
        function saveNewRep() {
            const name = document.getElementById('repName').value;
            const phone = document.getElementById('repPhone').value;
            const email = document.getElementById('repEmail').value;
            const salary = document.getElementById('repSalary').value;
            const commission = document.getElementById('repCommission').value;
            const area = document.getElementById('repArea').value;
            const vehicle = document.getElementById('repVehicle').value;
            
            if (!name || !phone || !area) {
                alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                return;
            }
            
            // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const newRep = {
                id: repsData.length + 1,
                name: name,
                phone: phone,
                email: email || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯',
                area: area === 'east' ? 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©' :
                      area === 'west' ? 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©' :
                      area === 'north' ? 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©' : 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©',
                status: 'active',
                salary: parseInt(salary) || 3000,
                commission: parseFloat(commission) || 5,
                vehicle: vehicle || 'Ø¨Ø¯ÙˆÙ† Ø³ÙŠØ§Ø±Ø©',
                todaySales: 0,
                todayCollection: 0,
                totalSales: 0,
                totalCollection: 0,
                customersCount: 0,
                performance: 0,
                joinDate: new Date().toISOString().split('T')[0],
                targets: {
                    monthly: 40000,
                    achieved: 0,
                    remaining: 40000
                },
                schedule: [
                    { day: "Ø§Ù„Ø³Ø¨Øª", visits: 0, completed: 0 },
                    { day: "Ø§Ù„Ø£Ø­Ø¯", visits: 0, completed: 0 },
                    { day: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", visits: 0, completed: 0 },
                    { day: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", visits: 0, completed: 0 },
                    { day: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", visits: 0, completed: 0 },
                    { day: "Ø§Ù„Ø®Ù…ÙŠØ³", visits: 0, completed: 0 },
                    { day: "Ø§Ù„Ø¬Ù…Ø¹Ø©", visits: 0, completed: 0 }
                ]
            };
            
            repsData.push(newRep);
            loadRepsData();
            updateStats();
            closeAddRepModal();
            
            alert(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ${name} Ø¨Ù†Ø¬Ø§Ø­!`);
        }

        // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
        function editRep() {
            if (!selectedRepId) return;
            alert('Ø®Ø§ØµÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±');
        }

        // ØªÙˆØ²ÙŠØ¹ Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
        function assignCustomers() {
            if (!selectedRepId) return;
            const rep = repsData.find(r => r.id === selectedRepId);
            alert(`Ø³ÙŠØªÙ… ÙØªØ­ ØµÙØ­Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ ${rep.name}`);
        }

        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø­Ù„Ø§Øª
        function showAllTrips() {
            alert('Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„Ø©\nØ³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ');
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡
        function generatePerformanceReport() {
            const reportData = {
                date: new Date().toLocaleDateString('ar-EG'),
                totalReps: repsData.length,
                activeReps: repsData.filter(rep => rep.status === 'active').length,
                totalSales: repsData.reduce((sum, rep) => sum + rep.todaySales, 0),
                totalCollection: repsData.reduce((sum, rep) => sum + rep.todayCollection, 0),
                avgPerformance: Math.round(repsData.reduce((sum, rep) => sum + rep.performance, 0) / repsData.length)
            };
            
            alert(`ØªÙ‚Ø±ÙŠØ± Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†:\n\n` +
                  `ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${reportData.date}\n` +
                  `ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†: ${reportData.totalReps}\n` +
                  `âœ… Ø§Ù„Ù†Ø´Ø·ÙŠÙ†: ${reportData.activeReps}\n` +
                  `ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª: ${reportData.totalSales.toLocaleString()} Ø¬\n` +
                  `ğŸ’µ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­ØµÙŠÙ„: ${reportData.totalCollection.toLocaleString()} Ø¬\n` +
                  `ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø£Ø¯Ø§Ø¡: ${reportData.avgPerformance}%\n\n` +
                  `Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù‚Ø§Ø¯Ù…`);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù
        function showTargets() {
            let targetsHTML = '<h4 style="margin-bottom: 15px;">Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ† Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</h4>';
            
            repsData.forEach(rep => {
                const achievedPercent = ((rep.targets.achieved / rep.targets.monthly) * 100).toFixed(1);
                targetsHTML += `
                    <div class="detail-row">
                        <div class="detail-label">${rep.name}</div>
                        <div class="detail-value">
                            ${rep.targets.achieved.toLocaleString()} / ${rep.targets.monthly.toLocaleString()} Ø¬
                            <span style="color: ${achievedPercent >= 90 ? 'var(--success)' : achievedPercent >= 70 ? 'var(--warning)' : 'var(--danger)'}">
                                (${achievedPercent}%)
                            </span>
                        </div>
                    </div>
                `;
            });
            
            alert('Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†');
        }
    </script>
</body>
</html>
